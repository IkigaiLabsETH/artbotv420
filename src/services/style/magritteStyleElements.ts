/**
 * Magritte Style Elements
 * Comprehensive collection of style parameters for authentic Magritte-style rendering
 */

/**
 * Comprehensive style elements for Magritte's distinctive approach
 * Includes technical aspects, visual elements, color palette, composition guidelines, references and avoidances
 */
export const magritteStyleElements = {
  /**
   * Style emphasis - technical aspects of Magritte's painting approach
   */
  styleEmphasis: [
    "precise Magritte-style oil painting",
    "perfect unmodulated paint surfaces",
    "traditional canvas texture",
    "crystal-clear execution",
    "philosophical surrealism",
    "metaphysical depth",
    "pristine technical rendering",
    "absolute flatness in paint",
    "perfect shadow execution",
    "mathematical precision",
    "mysterious atmospheric quality",
    "conceptual paradox",
    "pure painted forms",
    "traditional oil technique",
    "perfect color transitions"
  ],

  /**
   * Visual elements commonly found in Magritte's work
   */
  visualElements: [
    "floating bowler hats",
    "mysterious windows",
    "paradoxical doors",
    "perfect green apples",
    "Belgian sky blue background",
    "pristine blue skies",
    "mathematically precise clouds",
    "impossible shadows",
    "metaphysical curtains",
    "surreal landscapes",
    "floating stones",
    "mysterious birds",
    "perfect mirrors",
    "philosophical pipes",
    "enigmatic figures",
    "traditional frames"
  ],

  /**
   * Precise color palette used in Magritte's paintings
   */
  colorPalette: [
    "Magritte sky blue (RGB: 135, 206, 235)",
    "Belgian sky blue background (RGB: 135, 206, 235)",
    "deep shadow grey (RGB: 74, 74, 74)",
    "perfect apple green (RGB: 86, 130, 89)",
    "pristine cloud white (RGB: 245, 245, 245)",
    "rich earth brown (RGB: 139, 69, 19)",
    "stone grey (RGB: 128, 128, 128)",
    "deep night blue (RGB: 25, 25, 112)",
    "matte black (RGB: 28, 28, 28)",
    "pure canvas cream (RGB: 255, 253, 208)",
    "shadow blue (RGB: 68, 85, 90)",
    "pale sky (RGB: 176, 196, 222)",
    "deep foliage (RGB: 47, 79, 79)",
    "twilight purple (RGB: 78, 81, 128)",
    "morning grey (RGB: 169, 169, 169)",
    "horizon blue (RGB: 137, 207, 240)"
  ],

  /**
   * Specific composition guidelines that define Magritte's approach
   */
  compositionGuidelines: [
    "perfect central positioning",
    "mathematical balance",
    "mysterious depth through precise placement",
    "metaphysical arrangement of elements",
    "surreal scale relationships",
    "philosophical use of space",
    "object must fill 60-80% of frame",
    "precise horizon placement",
    "impossible shadows",
    "absolute symmetrical balance",
    "perfect square 1:1 aspect ratio",
    "traditional painting perspective",
    "pristine geometric arrangement",
    "careful negative space",
    "stark shadow patterns"
  ],

  /**
   * Mood and tone description for Magritte's work
   */
  moodAndTone: "Create scenes that embody the philosophical wonder of Magritte's surrealism through pure oil painting technique. Each piece should celebrate his precise, unmodulated paint application while maintaining the mysterious and contemplative nature of Belgian surrealism. The execution must demonstrate pristine technical precision while suggesting deeper metaphysical meanings through impossible arrangements and juxtapositions.",

  /**
   * Key Magritte works to reference for specific techniques
   */
  references: [
    "'The Son of Man' - for iconic composition",
    "'The Human Condition' - for paradoxical windows",
    "'The Dominion of Light' - for impossible lighting",
    "'Empire of Light' - for day/night paradox",
    "'The False Mirror' - for scale and mystery",
    "'Golconda' - for repeated elements",
    "'The Castle of the Pyrenees' - for floating objects",
    "'Personal Values' - for scale distortion",
    "'The Treachery of Images' - for philosophical depth",
    "'Time Transfixed' - for impossible locomotion"
  ],

  /**
   * Elements to avoid that would break Magritte's style
   */
  avoidElements: [
    "visible brushstrokes",
    "expressionist elements",
    "abstract forms",
    "bright unrealistic colors",
    "chaotic compositions",
    "heavy textures",
    "modern references",
    "digital effects",
    "photographic qualities",
    "contemporary objects",
    "non-traditional materials",
    "gestural painting",
    "impasto technique",
    "loose handling",
    "spontaneous effects"
  ],
  
  /**
   * RGB color values for precise color selection
   */
  rgbValues: {
    "sky_blue": { r: 135, g: 206, b: 235 },
    "belgian_sky_blue": { r: 135, g: 206, b: 235 },
    "shadow_grey": { r: 74, g: 74, b: 74 },
    "apple_green": { r: 86, g: 130, b: 89 },
    "cloud_white": { r: 245, g: 245, b: 245 },
    "earth_brown": { r: 139, g: 69, b: 19 },
    "stone_grey": { r: 128, g: 128, b: 128 },
    "night_blue": { r: 25, g: 25, b: 112 },
    "matte_black": { r: 28, g: 28, b: 28 },
    "canvas_cream": { r: 255, g: 253, b: 208 },
    "shadow_blue": { r: 68, g: 85, b: 90 },
    "pale_sky": { r: 176, g: 196, b: 222 },
    "deep_foliage": { r: 47, g: 79, b: 79 },
    "twilight_purple": { r: 78, g: 81, b: 128 },
    "morning_grey": { r: 169, g: 169, b: 169 },
    "horizon_blue": { r: 137, g: 207, b: 240 }
  },

  /**
   * Magritte-specific keywords for various aspects of his work
   */
  magritteKeywords: {
    // Portrait Elements
    portraitElements: [
      'mysterious face', 'enigmatic expression', 'classical portrait', 'traditional profile',
      'philosophical gaze', 'metaphysical features', 'surreal portrait', 'symbolic face',
      'floating head', 'mirror reflection', 'masked figure', 'veiled face',
      'traditional pose', 'classical composition', 'perfect symmetry', 'mysterious depth'
    ],
    
    // Painting Techniques
    paintingTechniques: [
      'traditional oil painting', 'flawless brushwork', 'pristine edges', 'perfect matte finish',
      'classical canvas texture', 'traditional medium', 'perfect surface quality', 'crystalline detail',
      'subtle shadows', 'unified lighting', 'smooth transitions', 'delicate modeling',
      'museum quality', 'masterful technique', 'perfect execution', 'classical approach'
    ],
    
    // Core Symbols and Objects
    coreSymbols: [
      'vintage fedora', 'classic newsboy cap', 'wool beanie', 'wide-brim felt hat',
      'flat cap', 'slouchy knit cap', 'porkpie hat', 'tweed flat cap',
      'green apples', 'clouds', 'pipes', 'mirrors', 'curtains', 'windows', 
      'birds', 'men in suits', 'floating rocks', 'everyday objects', 'mysterious doors',
      'candlesticks', 'chairs', 'tables', 'fruit', 'musical instruments',
      'wine bottles', 'bread loaves', 'books', 'paintings', 'frames'
    ],
    
    // Philosophical Concepts
    philosophicalConcepts: [
      'classical surrealism', 'traditional paradox', 'perfect mystery',
      'metaphysical questioning', 'philosophical depth', 'reality questioning',
      'classical reality', 'identity exploration', 'traditional space', 'visual poetry'
    ],
    
    // Visual Elements
    enhancedVisualElements: [
      'perfect lighting', 'traditional shadows', 'classical perspective',
      'pristine surfaces', 'perfect reflections', 'traditional depth',
      'flawless composition', 'classical framing', 'perfect symmetry',
      'day-night paradox', 'impossible shadows', 'floating objects'
    ],
    
    // Settings and Environments
    environments: [
      'traditional interiors', 'classical landscapes', 'perfect rooms',
      'pristine skies', 'traditional architecture', 'perfect spaces',
      'classical chambers', 'traditional windows', 'perfect staging',
      'belgian coastline', 'stone walls', 'wooden floors', 'wallpaper',
      'fireplaces', 'seaside views', 'garden paths', 'forest clearings'
    ],

    // Traditional Materials
    traditionalMaterials: [
      'oil paint', 'canvas texture', 'wooden frames', 'linen surface',
      'natural pigments', 'varnish finish', 'traditional brushwork',
      'classical glazing', 'traditional gesso', 'artist palette'
    ]
  },

  /**
   * Magritte's specific artistic approaches
   */
  artisticApproaches: {
    composition: [
      'traditionally painted objects',
      'classical arrangements',
      'perfect staging',
      'traditional displays',
      'flawless rendering',
      'classical spaces',
      'perfect reflections',
      'traditional windows',
      'classical perspective',
      'perfect space distortion'
    ],
    lighting: [
      'traditional natural light',
      'classical illumination',
      'perfect shadows',
      'traditional atmosphere',
      'classical twilight',
      'perfect darkness',
      'traditional radiance',
      'classical luminescence',
      'perfect atmosphere',
      'traditional light'
    ],
    color: [
      'deep sky blue (RGB: 135, 206, 235)',
      'crisp daylight blue (RGB: 176, 196, 222)',
      'clean grey tones (RGB: 128, 128, 128)',
      'pure black (RGB: 0, 0, 0)',
      'pristine white (RGB: 255, 255, 255)',
      'subtle earth tones (RGB: 193, 154, 107)',
      'clear cloud white (RGB: 236, 236, 236)',
      'precise shadow tones (RGB: 47, 79, 79)',
      'clean highlight blue (RGB: 230, 230, 250)',
      'pure neutral tones (RGB: 210, 180, 140)'
    ],
    narrative: [
      'classical philosophical questions',
      'traditional paradoxes',
      'perfect visual poetry',
      'classical metaphysics',
      'traditional reality questions',
      'perfect surrealism',
      'classical dialogues',
      'traditional narratives',
      'perfect stories',
      'classical identity'
    ],
    techniques: [
      'flawless oil technique',
      'perfect edge control',
      'traditional surface texture',
      'classical light treatment',
      'pristine detail rendering',
      'perfect shadow modeling',
      'traditional color transitions',
      'classical matte finish',
      'perfect canvas quality',
      'traditional oil methods'
    ]
  },

  /**
   * Additional RGB values for extended Magritte color palette
   */
  extendedRgbValues: {
    "deep_sky_blue": { r: 135, g: 206, b: 235 },
    "crisp_daylight_blue": { r: 176, g: 196, b: 222 },
    "clean_grey": { r: 128, g: 128, b: 128 },
    "pure_black": { r: 0, g: 0, b: 0 },
    "pristine_white": { r: 255, g: 255, b: 255 },
    "subtle_earth": { r: 193, g: 154, b: 107 },
    "clear_cloud": { r: 236, g: 236, b: 236 },
    "precise_shadow": { r: 47, g: 79, b: 79 },
    "clean_highlight_blue": { r: 230, g: 230, b: 250 },
    "pure_neutral": { r: 210, g: 180, b: 140 }
  },

  /**
   * Bear-specific Magritte style elements for PFP use
   */
  bearPfpElements: {
    portraitStyle: [
      "dignified bear in profile",
      "philosophical bear portrait",
      "surrealist bear character",
      "metaphysical ursine subject",
      "traditional bear businessman",
      "enigmatic bear face",
      "paradoxical bear representation",
      "conceptual bear imagery",
      "Belgian surrealist bear",
      "Magritte-inspired bear portrait"
    ],
    attire: [
      "formal suit with bowler hat",
      "businessman's attire",
      "dapper vest and tie",
      "traditional Belgian formal wear",
      "surrealist formal attire", 
      "metaphysical business suit",
      "philosophical waistcoat",
      "period-appropriate formal wear",
      "classic gentleman's attire",
      "traditional painter's smock"
    ],
    accessories: [
      "floating bowler hat",
      "philosophical pipe",
      "green apple",
      "mysterious key",
      "surreal umbrella",
      "metaphysical bird",
      "enigmatic mirror",
      "paradoxical window",
      "impossible door",
      "symbolic bell"
    ],
    expressions: [
      "dignified contemplation",
      "philosophical gaze", 
      "metaphysical composure",
      "surreal serenity",
      "enigmatic stare",
      "mysterious profile",
      "paradoxical expression",
      "calm observation",
      "conceptual thoughtfulness",
      "surrealist dignity"
    ],
    poses: [
      "dignified profile",
      "formal portrait stance",
      "contemplative pose",
      "surreal positioning",
      "metaphysical arrangement",
      "floating in Belgian sky",
      "paradoxically placed", 
      "impossibly balanced",
      "traditionally centered",
      "philosophically composed"
    ],
    professions: [
      "metaphysical businessman bear",
      "surrealist painter bear",
      "philosophical cartographer bear",
      "enigmatic musician bear",
      "paradoxical architect bear",
      "mysterious scientist bear", 
      "conceptual writer bear",
      "impossible engineer bear",
      "traditional craftsman bear",
      "dreamlike philosopher bear"
    ]
  }
};

/**
 * Get specific RGB color values for a Magritte palette color
 */
export function getRgbColor(colorName: keyof typeof magritteStyleElements.rgbValues | keyof typeof magritteStyleElements.extendedRgbValues): { r: number, g: number, b: number } {
  // First check the main RGB values
  if (colorName in magritteStyleElements.rgbValues) {
    return magritteStyleElements.rgbValues[colorName as keyof typeof magritteStyleElements.rgbValues];
  }
  
  // Then check the extended RGB values
  if (colorName in magritteStyleElements.extendedRgbValues) {
    return magritteStyleElements.extendedRgbValues[colorName as keyof typeof magritteStyleElements.extendedRgbValues];
  }
  
  // Return default if not found
  return magritteStyleElements.rgbValues.sky_blue;
}

/**
 * Get random elements from a specific style category
 */
export function getStyleElements(category: keyof typeof magritteStyleElements, count: number = 1): string[] {
  const elements = magritteStyleElements[category];
  if (!elements || !Array.isArray(elements) || elements.length === 0) {
    return [];
  }
  
  if (elements.length <= count) {
    return [...elements];
  }
  
  const shuffled = [...elements].sort(() => Math.random() - 0.5);
  return shuffled.slice(0, count);
}

/**
 * Get random elements from a nested category
 */
export function getNestedStyleElements(parent: keyof typeof magritteStyleElements, category: string, count: number = 1): string[] {
  const parentObj = magritteStyleElements[parent];
  if (!parentObj || typeof parentObj !== 'object' || !(category in parentObj)) {
    return [];
  }
  
  const elements = (parentObj as any)[category];
  if (!elements || !Array.isArray(elements) || elements.length === 0) {
    return [];
  }
  
  if (elements.length <= count) {
    return [...elements];
  }
  
  const shuffled = [...elements].sort(() => Math.random() - 0.5);
  return shuffled.slice(0, count);
}

/**
 * Generate a comprehensive style block incorporating multiple Magritte elements
 */
export function generateMagritteStyleBlock(): string {
  const technicalStyle = getStyleElements('styleEmphasis', 3).join(', ');
  const visualElements = getStyleElements('visualElements', 2).join(' and ');
  const colorDescription = getStyleElements('colorPalette', 3).join(', ');
  const composition = getStyleElements('compositionGuidelines', 2).join(', ');
  const reference = getStyleElements('references', 1)[0];
  
  // Add new elements from the enhanced keywords
  const portraitElement = getNestedStyleElements('magritteKeywords', 'portraitElements', 1)[0];
  const technique = getNestedStyleElements('artisticApproaches', 'techniques', 1)[0];
  const environment = getNestedStyleElements('magritteKeywords', 'environments', 1)[0];
  
  return `The painting employs ${technicalStyle} with ${visualElements} against a Belgian sky blue background. The palette features ${colorDescription}, composed with ${composition}. Featuring ${portraitElement} with ${technique} in ${environment}. Referencing ${reference}. ${magritteStyleElements.moodAndTone}`;
}

/**
 * Generate a detailed negative prompt based on elements to avoid
 */
export function generateMagritteNegativePrompt(): string {
  return magritteStyleElements.avoidElements.join(', ');
}

/**
 * Generate color instructions for a Magritte painting
 */
export function generateColorInstructions(count: number = 3): string {
  // Ensure Belgian sky blue is always included
  const belgianSkyBlue = "Belgian sky blue background (RGB: 135, 206, 235)";
  
  // Combine standard colors with artistic approach colors, minus count-1 to make room for Belgian sky blue
  const standardColors = getStyleElements('colorPalette', Math.ceil((count-1)/2));
  const approachColors = getNestedStyleElements('artisticApproaches', 'color', Math.floor((count-1)/2));
  
  // Filter out any duplicates of Belgian sky blue
  const filteredStandardColors = standardColors.filter(color => !color.includes("Belgian sky blue"));
  const filteredApproachColors = approachColors.filter(color => !color.includes("Belgian sky blue"));
  
  // Combine colors with Belgian sky blue first
  const colors = [belgianSkyBlue, ...filteredStandardColors, ...filteredApproachColors].slice(0, count);
  
  return `Use a precise Magritte palette featuring ${colors.join(', ')}, with emphasis on the Belgian sky blue background.`;
}

/**
 * Generate composition instructions for a Magritte painting
 */
export function generateCompositionInstructions(count: number = 3): string {
  // Combine standard composition with artistic approach composition
  const standardComposition = getStyleElements('compositionGuidelines', Math.ceil(count/2));
  const approachComposition = getNestedStyleElements('artisticApproaches', 'composition', Math.floor(count/2));
  const compositions = [...standardComposition, ...approachComposition].slice(0, count);
  
  return `Compose with ${compositions.join(', ')} against a characteristic Belgian sky blue background.`;
}

/**
 * Generate philosophical narrative for a Magritte painting
 */
export function generatePhilosophicalNarrative(): string {
  const narrativeElement = getNestedStyleElements('artisticApproaches', 'narrative', 1)[0];
  const philosophicalConcept = getNestedStyleElements('magritteKeywords', 'philosophicalConcepts', 1)[0];
  
  return `Infuse the image with ${narrativeElement} exploring ${philosophicalConcept}.`;
}

/**
 * Generate technical approach for a Magritte painting
 */
export function generateTechnicalApproach(): string {
  const paintingTechnique = getNestedStyleElements('magritteKeywords', 'paintingTechniques', 1)[0];
  const traditionalMaterial = getNestedStyleElements('magritteKeywords', 'traditionalMaterials', 1)[0];
  const technique = getNestedStyleElements('artisticApproaches', 'techniques', 1)[0];
  
  return `Render with ${paintingTechnique} using ${traditionalMaterial} and ${technique}.`;
}

/**
 * Generate lighting instructions for a Magritte painting
 */
export function generateLightingInstructions(): string {
  const lighting = getNestedStyleElements('artisticApproaches', 'lighting', 2).join(' with ');
  
  return `Illuminate with ${lighting}.`;
}

/**
 * Generate object selection for a Magritte painting
 */
export function generateObjectSelections(count: number = 2): string {
  const symbols = getNestedStyleElements('magritteKeywords', 'coreSymbols', count);
  
  return `Include ${symbols.join(' and ')} as focal elements.`;
} 